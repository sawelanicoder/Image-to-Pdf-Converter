<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Image to PDF Converter</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
    body {
        font-family: Arial, sans-serif;
        background: #f5f5f5;
        margin: 0;
        padding: 0;
        transition: background 0.3s, color 0.3s;
    }
    .dark-mode {
        background: #121212;
        color: #f5f5f5;
    }
    .container {
        max-width: 700px;
        margin: 30px auto;
        padding: 20px;
        background: white;
        border-radius: 10px;
        box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    .dark-mode .container {
        background: #1e1e1e;
    }
    h1 {
        text-align: center;
    }
    .upload-area {
        border: 2px dashed #aaa;
        padding: 20px;
        text-align: center;
        cursor: pointer;
        border-radius: 10px;
        background: #fafafa;
        margin-bottom: 15px;
    }
    .dark-mode .upload-area {
        background: #2a2a2a;
        border-color: #666;
    }
    input[type="file"] {
        display: none;
    }
    #preview {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        justify-content: center;
        margin-top: 10px;
    }
    #preview img {
        max-width: 120px;
        max-height: 120px;
        border-radius: 8px;
        object-fit: cover;
        border: 2px solid #ddd;
    }
    button {
        padding: 10px 20px;
        background: #007bff;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
        margin-top: 10px;
    }
    button:hover {
        background: #0056b3;
    }
    .controls {
        margin-top: 15px;
        display: flex;
        justify-content: space-around;
        flex-wrap: wrap;
    }
    select {
        padding: 5px;
    }
</style>
</head>
<body>

<div class="container">
    <h1>ðŸ“¸ Image to PDF Converter</h1>

    <div class="upload-area" id="uploadArea">
        Drag & Drop images here or click to select
        <input type="file" id="imageInput" multiple accept="image/*" capture="environment">
    </div>

    <div id="preview"></div>

    <div class="controls">
        <div>
            <label>Page Size: </label>
            <select id="pageSize">
                <option value="a4">A4</option>
                <option value="letter">Letter</option>
            </select>
        </div>
        <div>
            <label>Orientation: </label>
            <select id="orientation">
                <option value="portrait">Portrait</option>
                <option value="landscape">Landscape</option>
            </select>
        </div>
        <div>
            <button id="toggleTheme">ðŸŒ™ Dark/Light</button>
        </div>
    </div>

    <button id="convertBtn">Convert to PDF</button>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
const { jsPDF } = window.jspdf;
const uploadArea = document.getElementById('uploadArea');
const fileInput = document.getElementById('imageInput');
const preview = document.getElementById('preview');
let filesList = [];

function handleFiles(files) {
    for (let file of files) {
        if (file.type.startsWith('image/')) {
            filesList.push(file);
            const img = document.createElement('img');
            img.src = URL.createObjectURL(file);
            preview.appendChild(img);
        }
    }
}

// Click to open file picker
uploadArea.addEventListener('click', () => fileInput.click());

// Handle drag and drop
uploadArea.addEventListener('dragover', e => {
    e.preventDefault();
    uploadArea.style.borderColor = '#007bff';
});
uploadArea.addEventListener('dragleave', () => {
    uploadArea.style.borderColor = '#aaa';
});
uploadArea.addEventListener('drop', e => {
    e.preventDefault();
    uploadArea.style.borderColor = '#aaa';
    handleFiles(e.dataTransfer.files);
});

// Handle file picker
fileInput.addEventListener('change', e => handleFiles(e.target.files));

// Dark mode toggle
document.getElementById('toggleTheme').addEventListener('click', () => {
    document.body.classList.toggle('dark-mode');
});

// Convert to PDF
document.getElementById('convertBtn').addEventListener('click', () => {
    if (filesList.length === 0) {
        alert("Please upload at least one image.");
        return;
    }

    const pageSize = document.getElementById('pageSize').value;
    const orientation = document.getElementById('orientation').value;
    const pdf = new jsPDF({ orientation: orientation, unit: 'pt', format: pageSize });
    let firstPage = true;
    let processed = 0;

    filesList.forEach((file, index) => {
        const reader = new FileReader();
        reader.onload = e => {
            const img = new Image();
            img.onload = () => {
                const pageWidth = pdf.internal.pageSize.getWidth();
                const pageHeight = pdf.internal.pageSize.getHeight();

                // Scale to fit
                let ratio = Math.min(pageWidth / img.width, pageHeight / img.height);
                let imgWidth = img.width * ratio;
                let imgHeight = img.height * ratio;
                let x = (pageWidth - imgWidth) / 2;
                let y = (pageHeight - imgHeight) / 2;

                if (!firstPage) pdf.addPage();
                pdf.addImage(img, 'JPEG', x, y, imgWidth, imgHeight);
                firstPage = false;

                processed++;
                if (processed === filesList.length) {
                    pdf.save('images.pdf');
                }
            };
            img.src = e.target.result;
        };
        reader.readAsDataURL(file);
    });
});
</script>

</body>
</html>
